var re = /((?:\/\*(?:.|\s)*?\*\/)|(?:\/\/.*)|(?:^(?:\s|(?:(?:\/\*(?:.|\s)*?\*\/)|(?:\/\/.*)))+))|((?:"(?:(?:\\(?:.|\s))|(?:[^\\"\n\r]))*")|(?:'(?:(?:\\(?:.|\s))|(?:[^\\'\n\r]))*')|(?:\/(?:(?:\\(?:.|\s))|(?:[^\\\/\n\r]))*\/)|(?:`(?:(?:\\(?:.|\s))|(?:[^\\`]))*`))|((?:\s|(?:(?:\/\*(?:.|\s)*?\*\/)|(?:\/\/.*)))*(?:\n|\r)(?:\s|(?:(?:\/\*(?:.|\s)*?\*\/)|(?:\/\/.*)))*)|((?:[ \t\f\x0b\xa0\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u200b\u2028\u2029\u3000]|(?:(?:\/\*(?:.|\s)*?\*\/)|(?:\/\/.*)))*,(?:[ \t\f\x0b\xa0\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u200b\u2028\u2029\u3000]|(?:(?:\/\*(?:.|\s)*?\*\/)|(?:\/\/.*)))*)|((?:[ \t\f\x0b\xa0\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u200b\u2028\u2029\u3000]|(?:(?:\/\*(?:.|\s)*?\*\/)|(?:\/\/.*)))*=(?:[ \t\f\x0b\xa0\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u200b\u2028\u2029\u3000]|(?:(?:\/\*(?:.|\s)*?\*\/)|(?:\/\/.*)))*)|((?:[ \t\f\x0b\xa0\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u200b\u2028\u2029\u3000]|(?:(?:\/\*(?:.|\s)*?\*\/)|(?:\/\/.*)))+)/g;

function replace(m,comment,string,lineFeed,comma,equal,space){

  if(comment) return '';
  if(string) return string;
  if(lineFeed) return '\n';
  if(space) return ' ';
  if(comma) return ',';
  if(equal) return '=';

  return m;
}

module.exports = function(src){
  return src.replace(re,replace);
};
